<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plonesurvey">
<body>
<metal:main fill-slot="main">
    <tal:main-macro metal:define-macro="main"
        tal:define="errors options/state/getErrors;
                    Iterator python:modules['Products.CMFPlone'].IndexIterator;
                    tabindex python:Iterator();
                    member_id here/getSurveyId;
                    questions here/getQuestions;
                    completed python:here.checkCompletedFor(member_id);
                    pagetype here/portal_type">

        <div metal:use-macro="here/document_actions/macros/document_actions" />
        <h1 class="documentFirstHeading"
            tal:content="object_title" />
        <div class="documentDescription"
             tal:condition="here/Description"
             tal:content="here/Description" />
<hr />
	Ora puoi stampare il questionario. <a href="mostra_quest?tipo=html">Visualizza report per stampa</a> oppure <a href="mostra_quest?tipo=pdf">Scarica pdf del report</a>
<hr />
<h2>Qui sotto la lista delle risposte inviate:</h2>
<hr />
        <form name="edit_form"
              method="post"
              tal:attributes="action template/id"
              tal:condition="python:completed">
            <input type="hidden" name="form.submitted" value="1" />
            <fieldset>
                <legend tal:condition="completed" i18n:translate="legend_report_completed">Report</legend>
                <legend tal:condition="python:here.getId() == 'riepilogo' and not(completed)" i18n:translate="legend_summary_completed">Riepilogo dati sondaggio:</legend>
                <div tal:define="questions here/getAllQuestionsInOrder"
                     tal:repeat="question questions">

                 <div tal:omit-tag="" tal:condition="python: not('noreport' in question.Subject())">

                 <tal:condition condition="python:question.meta_type == 'SurveyMatrixQuestion'">
                    <div metal:use-macro="here/question_matrix_macro/macros/display" />
                 </tal:condition>
		 <tal:condition condition="python:question.meta_type <> 'SurveyGridQuestion' and question.meta_type <> 'SurveyMatrixQuestion' ">
                    <div metal:use-macro="here/question_macro/macros/display" />
		</tal:condition>
                 <tal:condition condition="python:question.meta_type == 'SurveyGridQuestion'">
                    <div metal:use-macro="here/question_grid_macro/macros/display" />
                </tal:condition>

                 </div>
                </div>
                <div class="formControls">
                    <input class="context"
                           type="submit"
                           value="Reset Survey"
                           name="form.button.reset_survey"
                           tabindex=""
                           tal:attributes="tabindex tabindex/next"
                           i18n:attributes="value reset_survey_button"
                           tal:condition="python:user.has_permission('PloneSurvey: Reset Own Responses', here) and completed" />
                </div>
            </fieldset>
        </form>
    </tal:main-macro>
</metal:main>
</body>
</html>
